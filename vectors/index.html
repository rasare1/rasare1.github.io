<!DOCTYPE html>

<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suma de Vectors Nàutics: Vaixell, Vent i Corrent</title>
    <script>
        //Les barres inclinades són comentaris de javascript, aquest codi que hi ha entre script
        //és un llenguatge diferent a html, és javascript
        /*
        comentari multilinia
        A sota tenim un codi javascript de configuració de mathjax, que permet renderitzar(visualitzar bé)
        les fòrmules matemàtiques en una pàgina web. Mathjax utilitza dos tipus de llenguatges matemàtics:
        TeX/LaTeX i MathML, TeX es pronuncia Tech i LaTeX significa Lamport que és el cognom de la persona que va modificar 
        TeX per fer-lo més fàcil, MathML és un llenguatge més modern semblant al HTML, ML significa Markup language, llenguatge 
        de marques. MathML és molt semblant a HTML, però és més llarg que LaTeX.
        
        */
        window.MathJax = {
            /*Crea una variable global anomenada window.MathJax que es carregarà quan es carregui la pàgina web i farà 
            que quan tenim les fòrmules en linía és a dir text normal i una fòrmula en la mateixa hem de escriure al principi
            un o dos dolars. Potser a la mateixa linía o en el mateix parragraf sense salts de linía ni centrats.
            */
    
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' } // Svg vol dir vectors escalables, es poden fer molt grans o petits
            //les imatges poden ser de dos tipus svg o mapa de bit. Els mapes de bit estan fets de pixels que són els png o jpg 
            //o gif . Els svg són millors que el mapes de big perquè són fòrmules matemàtiques i ens permet fer dibuixos perfectes.
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
   <!-- El codi anterior afegeix una bibloteca externa CDN (Content Delivery Network) que és de tipus javascript
  perquè acaba en script. Cada biblioteca externa serveix per una cosa. La biblioteca mathjax serveix per escriure
  fòrmules matemàtiques i símbols matemàtics. ltres biblíoteques que utlitzarem durant el curs: bootstrap5 per els menús desplegables,
  fontawsome per dibuixar símbols predissenyats que es troben  en els menús desplegables, p5.js és una biblíoteca que serveix per
  dibuixar de forma fàcil, nl5.js signifíca machine learning o aprenentatge per màquina i ens pot servir per reconeixer cares,gestos,
  poses..El número 5 prové de processing o proce55ing que es deia als antecessors d'aquest progr"ama. Processing és anterior a arduino
  i arduino deriva d'ell. Podem fer robòtica emprant en llenguatge <a href="https://processing.org"&gt;.
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
    /*hi ha tres grans families de lletres sans-serif i mono space
    Serif en francés o internacionalment, serifada o amb adornaments, és quan una lletra te uns restants 
    Sans-serif, significa sans serif, és a dir sense adornaments.
    Monospace, significa lletra monoespaciada que ocupa cada lletra
    */
/* Model de caixes css o box model css, en el box model tenim una capa al voltant del
    contingut o content que es diu padding, al voltant del padding es troba el border i al voltant del border es troba el margin.
    Margin, border i padding són propietats css( properties) que van seguides de dos punts i un valor o value en pixels
    Tots els css són iguals, primer es posa el nom de la etiqueta html o tag a la qual volem donar-li un o diversos estils,
    per exemple h2 o button o canvas... Després del tag es posa una clau de tipus "curly bracket" i a sota es posa
    propietat1:valor1; i en la línia següent propietat2:valor2;
        si la propietat és color el valor és #333. El número decimal, és un número hexadecimal en base 16.
        Vol dir que els números hexadecimals són 0 al 9, A(vol dir 10), B(vol dir 11), C(vol dir 12), D(vol dir 13), E(vol dir 14), F(vol dir 15).
        Els codis de colors tenen tres valors hexadecimals que van del 00 fins al FF, és a dir que tinc una combinació que va des del
        00000 fins al FFFFFF. Els dos primers digits són el color vermell, els dos següents són el color verd, i el dos útils són blaus.
        Recordar rgb(red,green,blue). Quantes combinacions de colors tenim? 256 elevat a la 3-16 milions 700 mil colors diferents.
        El color es pot expressar en hexadecimal o en rgb en decimal, per exemple #FF0000, és 255,0,es pot expressar d'un altre manera?
        A vegades noms en angles com red o noms que puc trobar amb color names html en google. h2 de la línia 67 controla el h2 
        que es troba a la línia 82 i el #333 és el color gris. LLavors que fa la línia 67 i la línia 82? Fa que el títol de la línia
        82 sigui gris*/ 
       
        h2 { color: #333; }
        input[type="number"] { width: 70px; margin-right: 10px; }
     /*input és una etiqueta html que permet l'entrada de dades per l'usuari i al ser de tipus number només accepta números,
        no accepta lletres com podem veure a la línia 70 i a lés línies 106, 107,112,113,118 i 119. El input és com una caixa de text per a que 
        escrigui l'usuari i tindrà una amplada definida a la línia 70 amb css width és amplada en angles i amb 70 pixels d'amplada
        puc escriure més d'un número d'ample, i perquè deixo marge a la dreta de 10 píxels? Per tenir espai i no s'uneix l'entrada d'informació 
        amb  l'entrada de l'usuari, seria un marge dintre de la caixa.*/
    
        button { padding: 8px 16px; margin-top: 10px; cursor: pointer; }
    /* A la 77 tinc la configuració del botó o d etots els botons que està a la 128 i que ens permet 
        calcular quan clico. Aquest botó tè padding o marge interior, quan hi ha dos números, 8 píxels i 16 píxels,
        si hi ha un número significa que els marges estàn pels 4 costats i són iguals aquest números, 
        si hi ha dos números el primer número és el mateix marge adalt i abaix, i el segon número és a la dreta i a la esquerra,
        en aquest cas 8 píxels adalt i abaix i 16 píxels a dreta i esquerra. Si hi hagues tres números el primer és adalt,
        el segon dreta i esquerra i el tercer número és a baix,margin top és un altre forma de regular el marge superior,
        també existeix margin-bottom, margin-rigth i marging-left. Cursor pointer és que es vegi el cursos dins del text 
        box o caixa de text.*/
        .result { margin-top: 20px; background-color: #f0f0f0; padding: 10px; border-radius: 5px; }
        canvas { border: 1px solid #ccc; margin-top: 20px; background-color: #f9f9f9; }
    /* Canvas a la línia 127 es una etiqueta html que correspon a una àrea de dibuix que si em fixo en la línia 127 esta buida, perquè
    entre <canva> i </canvas> no hi ha res, a més diu que style es displaynoone, es a dir que no es vegi.
    La línia 76 esta controlant la línia 127, es a dir controla com és el canvas. Quan sigui visible el cavas tindrà següent estil:
    Els bordes tenen un gruix de 1px, es sòlid, perquè podría ser puntejat amb la paraula dotted, podría ser també double i veuriem 
    un borde al voltant del primer. Podríem posar margin-top d'un maera? margin: 20px 0  0;. Se que aquest color es gris, perquè augmento
    la mateixa manera i amb el mateix número rgb. Com podría fer el background-color d'una altra manera? 
    f9 es un número hexadecimal Paso 1: Multiplicar cada dígito de F9 hexadecimal (F9)₁₆ = (15 × 16^1) + (9 × 16^0). 
    El número 249 es decimal i si vull pasar-lo a binari , he de dividir entre 2 com vam aprendre a quart. */
    
        .teoria { background: #eef; padding: 10px; border-radius: 5px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Suma de Vectors Nàutics: Vaixell, Vent i Corrent</h1>


<div class="teoria">
    <h2>Recordatori Teòric</h2>
    <p>Per un vector de mòdul $V$ i rumb $\theta$ (en graus):</p>
    <ul>
        <li>$\theta_{rad} = \theta \cdot \pi / 180$</li>
        <li>Component horitzontal (X): $V_x = V \cdot \sin(\theta_{rad})$</li>
        <li>Component vertical (Y): $V_y = V \cdot \cos(\theta_{rad})$</li>
    </ul>
    <p>Suma de vectors:</p>
    <ul>
        <li>$R_x = V_x + W_x + C_x$</li>
        <li>$R_y = V_y + W_y + C_y$</li>
    </ul>
    <p>Vector resultant:</p>
    <ul>
        <li>$|R| = \sqrt{R_x^2 + R_y^2}$</li>
        <li>$\theta_R = \arctan\left(\frac{R_x}{R_y}\right)$</li>
    </ul>
</div>

<p>Introdueix els vectors (rumb en graus i velocitat en nusos) i clica "Calcula".</p>

<div>
    <h2>Vector del Vaixell ($\vec{V}$)</h2>
    Rumb: <input type="number" id="vRumb" value="146">°
    Velocitat: <input type="number" id="vVel" value="10"> nusos
</div>

<div>
    <h2>Vector del Vent ($\vec{W}$)</h2>
    Rumb: <input type="number" id="wRumb" value="240">°
    Velocitat: <input type="number" id="wVel" value="5"> nusos
</div>

<div>
    <h2>Vector del Corrent ($\vec{C}$)</h2>
    Rumb: <input type="number" id="cRumb" value="30">°
    Velocitat: <input type="number" id="cVel" value="3"> nusos
</div>

<button onclick="calculaVectors()">Calcula</button>

<div id="result" class="result" style="display:none;"></div>
<canvas id="canvas" width="500" height="500" style="display:none;"></canvas>

<script>
    function calculaVectors() {
        const vRumb = parseFloat(document.getElementById('vRumb').value);
        const vVel = parseFloat(document.getElementById('vVel').value);
        const wRumb = parseFloat(document.getElementById('wRumb').value);
        const wVel = parseFloat(document.getElementById('wVel').value);
        const cRumb = parseFloat(document.getElementById('cRumb').value);
        const cVel = parseFloat(document.getElementById('cVel').value);

        const degToRad = Math.PI / 180;
        const vRad = vRumb * degToRad;
        const wRad = wRumb * degToRad;
        const cRad = cRumb * degToRad;

        const Vx = vVel * Math.sin(vRad);
        const Vy = vVel * Math.cos(vRad);
        const Wx = wVel * Math.sin(wRad);
        const Wy = wVel * Math.cos(wRad);
        const Cx = cVel * Math.sin(cRad);
        const Cy = cVel * Math.cos(cRad);

        const Rx = Vx + Wx + Cx;
        const Ry = Vy + Wy + Cy;
        const Rmag = Math.sqrt(Rx**2 + Ry**2);
        let Rdeg = Math.atan2(Rx, Ry) * 180 / Math.PI;
        if (Rdeg < 0) Rdeg += 360;

        const resultDiv = document.getElementById('result');
        resultDiv.style.display = 'block';
        resultDiv.innerHTML = `
            <h2>Resultats pas a pas</h2>

            <p><strong>Conversió a radians:</strong></p>
            <ul>
                <li>$${vRumb}^\\circ \\cdot \\pi/180 = ${(vRad).toFixed(3)} \\, rad$</li>
                <li>$${wRumb}^\\circ \\cdot \\pi/180 = ${(wRad).toFixed(3)} \\, rad$</li>
                <li>$${cRumb}^\\circ \\cdot \\pi/180 = ${(cRad).toFixed(3)} \\, rad$</li>
            </ul>

            <p><strong>Components (usant sin i cos):</strong></p>
            <ul>
                <li>$V_x = ${vVel} \\cdot \\sin(${vRumb}^\\circ) = ${Vx.toFixed(3)}$</li>
                <li>$V_y = ${vVel} \\cdot \\cos(${vRumb}^\\circ) = ${Vy.toFixed(3)}$</li>
                <li>$W_x = ${wVel} \\cdot \\sin(${wRumb}^\\circ) = ${Wx.toFixed(3)}$</li>
                <li>$W_y = ${wVel} \\cdot \\cos(${wRumb}^\\circ) = ${Wy.toFixed(3)}$</li>
                <li>$C_x = ${cVel} \\cdot \\sin(${cRumb}^\\circ) = ${Cx.toFixed(3)}$</li>
                <li>$C_y = ${cVel} \\cdot \\cos(${cRumb}^\\circ) = ${Cy.toFixed(3)}$</li>
            </ul>

            <p><strong>Suma de components:</strong></p>
            <ul>
                <li>$R_x = ${Vx.toFixed(3)} + ${Wx.toFixed(3)} + ${Cx.toFixed(3)} = ${Rx.toFixed(3)}$</li>
                <li>$R_y = ${Vy.toFixed(3)} + ${Wy.toFixed(3)} + ${Cy.toFixed(3)} = ${Ry.toFixed(3)}$</li>
            </ul>

            <p><strong>Mòdul (teorema de Pitàgores):</strong></p>
            <p>$|R| = \\sqrt{(${Rx.toFixed(3)})^2 + (${Ry.toFixed(3)})^2} = ${Rmag.toFixed(2)} \\, nusos$</p>

            <p><strong>Rumb (funció arctan):</strong></p>
            <p>$\\theta_R = \\arctan\\left(\\frac{${Rx.toFixed(3)}}{${Ry.toFixed(3)}}\\right) = ${Rdeg.toFixed(2)}^\\circ$</p>
        `;
        MathJax.typeset();

        const canvas = document.getElementById('canvas');
        canvas.style.display = 'block';
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const cx0 = canvas.width/2;
        const cy0 = canvas.height/2;
        const scale = 15;

        function drawVector(x, y, color, label) {
            ctx.beginPath();
            ctx.moveTo(cx0, cy0);
            ctx.lineTo(cx0 + x*scale, cy0 - y*scale);
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();

            const angle = Math.atan2(-y, x);
            const headLength = 10;
            ctx.beginPath();
            ctx.moveTo(cx0 + x*scale, cy0 - y*scale);
            ctx.lineTo(cx0 + x*scale - headLength*Math.cos(angle - Math.PI/6),
                       cy0 - y*scale + headLength*Math.sin(angle - Math.PI/6));
            ctx.lineTo(cx0 + x*scale - headLength*Math.cos(angle + Math.PI/6),
                       cy0 - y*scale + headLength*Math.sin(angle + Math.PI/6));
            ctx.lineTo(cx0 + x*scale, cy0 - y*scale);
            ctx.fillStyle = color;
            ctx.fill();

            ctx.fillStyle = color;
            ctx.font = "14px Arial";
            ctx.fillText(label, cx0 + x*scale + 5, cy0 - y*scale - 5);
        }

        drawVector(Vx, Vy, 'blue', 'V');
        drawVector(Wx, Wy, 'green', 'W');
        drawVector(Cx, Cy, 'orange', 'C');
        drawVector(Rx, Ry, 'red', 'R');
    }
</script>

</body>
</html>
